<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¡œë˜ë²ˆí˜¸ ì¶”ì²¨ê¸°</title>
  <style>
    :root {
      color-scheme: light dark;

      --bg: #222;
      --text: #fff;
      --card-bg: rgba(255,255,255,.1);
      --card-border: rgba(255,255,255,.14);
      --ghost-border: rgba(255,255,255,.22);
      --ball-text: #111;
    }

    body.light-mode {
      --bg: #f0f0f0;
      --text: #333;
      --card-bg: rgba(255,255,255,.6);
      --card-border: rgba(0,0,0,.1);
    }
    
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      margin:0; padding:24px;
      min-height:100vh;
      display:grid; place-items:center;
      background: var(--bg);
      color: var(--text);
    }

    .theme-container{
      position: fixed;
      top: 24px;
      right: 24px;
    }

    #themeBtn{
      background: #fff;
      color: #000;
      border: 1px solid rgba(0,0,0,.1);
    }
    body.light-mode #themeBtn{
      background: #000;
      color: #fff;
      border: 1px solid rgba(255,255,255,.14);
    }

    .card{
      width:min(760px, 100%);
      border:1px solid var(--card-border);
      border-radius:18px;
      padding:22px;
      background: var(--card-bg);
      box-shadow: 0 14px 38px rgba(0,0,0,.22);
      backdrop-filter: blur(8px);
    }

    h1{ margin:0 0 8px; font-size:22px; letter-spacing:-.2px; }
    p{ margin:0 0 18px; opacity:.85; line-height:1.55; }

    .row{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
      margin-bottom:14px;
    }

    .left{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      opacity:.9;
    }
    label{ cursor:pointer; }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; }

    button{
      cursor:pointer;
      border:0;
      padding:12px 16px;
      border-radius:12px;
      font-weight:800;
      font-size:15px;
      letter-spacing:-.2px;
      transition: transform .06s ease, filter .2s ease;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
    }
    button:active{ transform: translateY(1px); }

    .primary{ background:#3b82f6; color:#fff; }
    .ghost{
      background:transparent;
      color: inherit;
      border:1px solid var(--ghost-border);
      box-shadow:none;
    }
    .ghost:hover{ filter:brightness(1.05); }

    .numbers{
      display:flex; flex-wrap:wrap; gap:10px;
      padding:16px;
      border-radius:14px;
      border:1px dashed var(--ghost-border);
      min-height:72px;
      align-items:center;
    }

    .ball{
      width:46px; height:46px;
      display:grid; place-items:center;
      border-radius:999px;
      font-weight:900;
      font-size:15px;
      user-select:none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35),
                  0 10px 20px rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.18);
      color: var(--ball-text);
    }

    /* ë²ˆí˜¸ êµ¬ê°„ë³„ ì»¬ëŸ¬(ë¡œë˜ ëŠë‚Œ) */
    .c1{ background: linear-gradient(180deg, #ffe37a, #f7b733); }  /* 1~10 ë…¸ë‘ */
    .c2{ background: linear-gradient(180deg, #8fd3ff, #2a74ff); color:#fff; } /* 11~20 íŒŒë‘ */
    .c3{ background: linear-gradient(180deg, #ff9a9a, #ef4444); color:#fff; } /* 21~30 ë¹¨ê°• */
    .c4{ background: linear-gradient(180deg, #e5e7eb, #9ca3af); } /* 31~40 íšŒìƒ‰ */
    .c5{ background: linear-gradient(180deg, #a7f3d0, #22c55e); } /* 41~45 ì´ˆë¡ */

    .sep{
      opacity:.7;
      font-weight:900;
      padding:0 2px;
    }

    .meta{
      margin-top:10px;
      opacity:.8;
      font-size:13px;
      line-height:1.4;
    }

    .hint{
      opacity:.75;
      font-size:13px;
    }

    input[type="checkbox"]{ transform: scale(1.12); }
  </style>
</head>

<body>
  <div class="theme-container">
    <button id="themeBtn" type="button"></button>
  </div>

  <main class="card">
    <h1>ğŸ² ë¡œë˜ë²ˆí˜¸ ì¶”ì²¨ê¸°</h1>
    <p>ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ <b>1~45</b> ì‚¬ì´ì—ì„œ <b>ì¤‘ë³µ ì—†ì´ 6ê°œ</b> ë²ˆí˜¸ë¥¼ ë½‘ì•„ <b>ì˜¤ë¦„ì°¨ìˆœ</b>ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>

    <div class="row">
      <div class="left">
        <input id="bonusToggle" type="checkbox" />
        <label for="bonusToggle">ë³´ë„ˆìŠ¤ ë²ˆí˜¸ë„ ì¶”ì²¨</label>
      </div>

      <div class="actions">
        <button id="drawBtn" class="primary" type="button">ë²ˆí˜¸ ì¶”ì²¨í•˜ê¸°</button>
        <button id="copyBtn" class="ghost" type="button">ë³µì‚¬</button>
      </div>
    </div>

    <div id="result" class="numbers" aria-live="polite">
      <span class="hint">ì•„ì§ ì¶”ì²¨ ì „ì´ì—ìš”. ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš” ğŸ™‚</span>
    </div>

    <div class="meta" id="meta"></div>
  </main>

  <script>
    const $ = (sel) => document.querySelector(sel);

    // Theme Toggle
    const themeBtn = $("#themeBtn");
    const body = document.body;

    function applyTheme(theme) {
      if (theme === 'light') {
        body.classList.add("light-mode");
        themeBtn.textContent = "ë‹¤í¬ëª¨ë“œ";
      } else {
        body.classList.remove("light-mode");
        themeBtn.textContent = "í™”ì´íŠ¸ëª¨ë“œ";
      }
    }

    themeBtn.addEventListener("click", () => {
      const currentTheme = body.classList.contains("light-mode") ? 'light' : 'dark';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      localStorage.setItem("theme", newTheme);
      applyTheme(newTheme);
    });

    // Apply saved theme on load
    const savedTheme = localStorage.getItem("theme") || 'dark';
    applyTheme(savedTheme);


    // Lotto App Logic
    function drawLotto(includeBonus = false) {
      const pool = Array.from({ length: 45 }, (_, i) => i + 1);

      // Fisherâ€“Yates shuffle
      for (let i = pool.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [pool[i], pool[j]] = [pool[j], pool[i]];
      }

      const main = pool.slice(0, 6).sort((a, b) => a - b);
      const bonus = includeBonus ? pool[6] : null;
      return { main, bonus };
    }

    // ë²ˆí˜¸ì— ë”°ë¥¸ ìƒ‰ í´ë˜ìŠ¤ ë°˜í™˜
    function colorClass(n) {
      if (n <= 10) return "c1";
      if (n <= 20) return "c2";
      if (n <= 30) return "c3";
      if (n <= 40) return "c4";
      return "c5"; // 41~45
    }

    function makeBall(n) {
      const ball = document.createElement("div");
      ball.className = `ball ${colorClass(n)}`;
      ball.textContent = n;
      return ball;
    }

    function render({ main, bonus }) {
      const result = $("#result");
      result.innerHTML = "";

      main.forEach((n) => result.appendChild(makeBall(n)));

      if (bonus !== null) {
        const sep = document.createElement("div");
        sep.className = "sep";
        sep.textContent = "+";
        result.appendChild(sep);

        result.appendChild(makeBall(bonus));
      }

      const now = new Date();
      $("#meta").textContent = `ì¶”ì²¨ ì‹œê°„: ${now.toLocaleString("ko-KR")}`;
    }

    function toText({ main, bonus }) {
      return bonus !== null
        ? `${main.join(", ")} + ë³´ë„ˆìŠ¤ ${bonus}`
        : main.join(", ");
    }

    let last = null;

    $("#drawBtn").addEventListener("click", () => {
      const includeBonus = $("#bonusToggle").checked;
      last = drawLotto(includeBonus);
      render(last);
    });

    $("#copyBtn").addEventListener("click", async () => {
      if (!last) {
        alert("ë¨¼ì € ë²ˆí˜¸ë¥¼ ì¶”ì²¨í•´ ì£¼ì„¸ìš”!");
        return;
      }
      try {
        await navigator.clipboard.writeText(toText(last));
        alert("í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆì–´ìš”!");
      } catch (e) {
        // fallback
        const ta = document.createElement("textarea");
        ta.value = toText(last);
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        alert("ë³µì‚¬í–ˆì–´ìš”!");
      }
    });
  </script>
</body>
</html>